<!-- Initialize a 9x9 canvas containing 64x64 images -->
<canvas id="maze" width="704" height="704"></canvas>
<script>
    let sizeX = 9,
        sizeY = 9;

    let canvas = document.getElementById("maze");
    let ctx = canvas.getContext("2d");
    
    let image = new Image();
    // TBD: Support all three tiles
    // Load the tile's sprite sheet
    image.onload = function() {
        for (let i = 1; i < 10; i++)
            for (let j = 1; j < 10; j++)
                ctx.drawImage(image, i*64, j*64, 64, 64);
    };
    image.src = "images/tile.png";
    
    // TBD: store maze in a 2D array
    let labyrinth = Array.from({ length: sizeX+2 }, () => Array.from({ length: sizeY+2 }, () => {
        return [0, 0, 0, 0, 0];
    }));

    let position = 0;
    function move(insertion, number) {
        // Clear the canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Draw sliding and fixed images
        for (let i = 1; i < 10; i++) {
            for (let j = 1; j < 10; j++) {
                if (insertion < 2) {
                    if(j === number) ctx.drawImage(image, position + i*64, j*64, 64, 64);
                    else ctx.drawImage(image, i*64, j*64, 64, 64);
                } else if (insertion >= 2) {
                    if(i === number) ctx.drawImage(image, i*64, position + j*64, 64, 64);
                    else ctx.drawImage(image, i*64, j*64, 64, 64);
                }
            }
        }

        // If the images have reached their final destination, end movement
        if ((insertion%2 === 1 && position < -64) || (insertion%2 === 0 && position > 64)) {
            return;
        }

        // Slide the images
        if (insertion%2 === 1) position -= 1;
        else if (insertion%2 === 0) position += 1;

        // Request another frame
        requestAnimationFrame(function(){ return move(insertion, number); });
    }

</script>